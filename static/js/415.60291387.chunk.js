"use strict";(globalThis.webpackChunklighter=globalThis.webpackChunklighter||[]).push([[415],{3415:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var s=a(5043),r=a(6971),n=a(2581),i=a(3217);const o="ResultRow_row__AedA6",l="ResultRow_platformId__ofzCA",d="ResultRow_route__mmKQe",u="ResultRow_destination__wgXIt",c="ResultRow_time__kfFOt";var _=a(579);const m=function(e){const{platformId:t,route:a,destination:s,trainLength:r,time:n}=e;return(0,_.jsxs)("div",{className:o,children:[(0,_.jsx)("span",{className:l,children:t}),(0,_.jsxs)("span",{className:d,children:[a,"number"===typeof r?(0,_.jsx)(i.A,{code:new Array(r).fill(0).map((()=>"\ud83d\ude8b")).join("")}):r]}),(0,_.jsx)("span",{className:u,children:s}),(0,_.jsx)("span",{className:c,children:n})]})};var h=a(3033);const p=h.Ik().shape({platform_list:h.YO().of(h.Ik().shape({platform_id:h.ai().required(),route_list:h.YO().of(h.Ik().shape({train_length:h.ai().integer().positive().required(),route_no:h.Yj().required(),time_en:h.Yj().required(),dest_en:h.Yj().required()}).required()).required()}).required()).required()}).required();var f=a(6639);const g="ResultPage_page__T61dZ",j="ResultPage_stationName__GUkcM";const w=function(){const{stationId:e}=(0,r.g)(),[t,a]=(0,s.useState)();(0,s.useEffect)((()=>{const t=new AbortController,{signal:s}=t;let r=0;const n=async()=>{try{const t=await fetch(`https://rt.data.gov.hk/v1/transport/mtr/lrt/getSchedule?station_id=${e}`,{mode:"cors",method:"GET",signal:s}),r=await t.json(),n=await p.validate(r);s.aborted||a(n)}catch{r++<5&&n()}};return n(),()=>{t.abort()}}),[e]);const i=(0,s.useMemo)((()=>{const t=f.find((({id:t})=>t===e));return t?`${t.nameEn} ${t.nameCh}`:""}),[e]);return(0,_.jsxs)("div",{className:g,children:[(0,_.jsx)("h3",{className:j,children:i}),(0,_.jsx)(m,{platformId:"Platform",trainLength:"",route:"Route",time:"Time of arrivals",destination:"Destination"}),t?t.platform_list.flatMap((({platform_id:e,route_list:t})=>t.flatMap((({train_length:t,route_no:a,time_en:s,dest_en:r})=>(0,_.jsx)(m,{platformId:e,trainLength:t,route:a,time:s,destination:r},`${e}-${t}-${a}-${s}-${r}`))))):(0,_.jsx)(n.A,{})]})}}}]);
//# sourceMappingURL=415.60291387.chunk.js.map