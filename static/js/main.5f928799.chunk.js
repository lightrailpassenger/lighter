(this.webpackJsonplighter=this.webpackJsonplighter||[]).push([[0],{16:function(e){e.exports=JSON.parse('[{"id":"080","routes":["610","751"],"nameCh":"\u6fa4\u8c50","nameEn":"Affluence","lat":22.4035304,"lon":113.9758783},{"id":"015","routes":["615P","610","615"],"nameCh":"\u8774\u8776","nameEn":"Butterfly","lat":22.3781579,"lon":113.9617536},{"id":"490","routes":["751"],"nameCh":"\u7fe0\u6e56","nameEn":"Chestwood","lat":22.4596928,"lon":113.9996008},{"id":"120","routes":["505","615P","615"],"nameCh":"\u9752\u677e","nameEn":"Ching Chung","lat":22.4073257,"lon":113.972571},{"id":"075","routes":["507","751"],"nameCh":"\u8521\u610f\u6a4b","nameEn":"Choy Yee Bridge","lat":22.4000237,"lon":113.9743666},{"id":"468","routes":["705","706","751","761P"],"nameCh":"\u980c\u5bcc","nameEn":"Chung Fu","lat":22.4619988,"lon":113.9970468},{"id":"370","routes":["610","614","615","751"],"nameCh":"\u937e\u5c4b\u6751","nameEn":"Chung Uk Tsuen","lat":22.4296975,"lon":113.9922331},{"id":"570","routes":["610","614","615","761P"],"nameCh":"\u8c50\u5e74\u8def","nameEn":"Fung Nin Road","lat":22.4445292,"lon":114.0238504},{"id":"340","routes":["614P","614"],"nameCh":"\u9cf3\u5730","nameEn":"Fung Tei","lat":22.4067811,"lon":113.9788053},{"id":"455","routes":["705","706","751"],"nameCh":"\u9280\u5ea7","nameEn":"Ginza","lat":22.4575107,"lon":114.0049623},{"id":"260","routes":["507","614P","614"],"nameCh":"\u8c50\u666f\u5712","nameEn":"Goodview Garden","lat":22.3833066,"lon":113.973042},{"id":"425","routes":["751","761P"],"nameCh":"\u5751\u5c3e\u6751","nameEn":"Hang Mei Tsuen","lat":22.4451439,"lon":114.0056157},{"id":"070","routes":["507","751"],"nameCh":"\u6cb3\u7530","nameEn":"Ho Tin","lat":22.3971066,"lon":113.9730527},{"id":"310","routes":["614P","614"],"nameCh":"\u4f55\u798f\u5802","nameEn":"Hoh Fuk Tong","lat":22.3974126,"lon":113.9774837},{"id":"580","routes":["610","614","615","761P"],"nameCh":"\u5eb7\u6a02\u8def","nameEn":"Hong Lok Road","lat":22.4445079,"lon":114.0269434},{"id":"380","routes":["610","614","615","751"],"nameCh":"\u6d2a\u6c34\u6a4b","nameEn":"Hung Shui Kiu","lat":22.4336604,"lon":113.9974787},{"id":"110","routes":["505","615P"],"nameCh":"\u9e92\u9e9f","nameEn":"Kei Lun","lat":22.4107151,"lon":113.9764566},{"id":"060","routes":["505"],"nameCh":"\u5efa\u5b89","nameEn":"Kin On","lat":22.395141,"lon":113.9690083},{"id":"130","routes":["505","615P","615"],"nameCh":"\u5efa\u751f","nameEn":"Kin Sang","lat":22.4067368,"lon":113.9692049},{"id":"350","routes":["610","614","615","751"],"nameCh":"\u85cd\u5730","nameEn":"Lam Tei","lat":22.4186987,"lon":113.981894},{"id":"150","routes":["505","507","615P","615"],"nameCh":"\u826f\u666f","nameEn":"Leung King","lat":22.4066703,"lon":113.9636996},{"id":"020","routes":["615P","610","615"],"nameCh":"\u8f15\u9435\u8eca\u5ee0","nameEn":"Light Rail Depot","lat":22.3818614,"lon":113.9633959},{"id":"448","routes":["705","706","761P"],"nameCh":"\u6a02\u6e56","nameEn":"Locwood","lat":22.4531283,"lon":114.001137},{"id":"030","routes":["615P","610","615"],"nameCh":"\u9f8d\u9580","nameEn":"Lung Mun","lat":22.3852838,"lon":113.9650534},{"id":"010","routes":["615P","610","615"],"nameCh":"\u7f8e\u6a02","nameEn":"Melody Garden","lat":22.3750826,"lon":113.961188},{"id":"200","routes":["505","615P","610","615"],"nameCh":"\u9cf4\u7434","nameEn":"Ming Kum","lat":22.3971361,"lon":113.967312},{"id":"360","routes":["610","614","615","751"],"nameCh":"\u6ce5\u570d","nameEn":"Nai Wai","lat":22.4238581,"lon":113.9866093},{"id":"230","routes":["507","610"],"nameCh":"\u9280\u570d","nameEn":"Ngan Wai","lat":22.4024426,"lon":113.974685},{"id":"270","routes":["505","507","614P","614","751"],"nameCh":"\u5b89\u5b9a","nameEn":"On Ting","lat":22.3876044,"lon":113.9751},{"id":"400","routes":["610","614","615","761P"],"nameCh":"\u5c4f\u5c71","nameEn":"Ping Shan","lat":22.44288,"lon":114.012039},{"id":"330","routes":["614P","614"],"nameCh":"\u666f\u5cf0","nameEn":"Prime View","lat":22.4031239,"lon":113.9795382},{"id":"300","routes":["614P","614"],"nameCh":"\u676f\u6e21","nameEn":"Pui To","lat":22.3946448,"lon":113.9768261},{"id":"920","routes":["505"],"nameCh":"\u4e09\u8056","nameEn":"Sam Shing","lat":22.3824815,"lon":113.9766031},{"id":"320","routes":["614P","614"],"nameCh":"\u65b0\u589f","nameEn":"San Hui","lat":22.4002367,"lon":113.9780398},{"id":"160","routes":["505","507","615P","615"],"nameCh":"\u65b0\u570d","nameEn":"San Wai","lat":22.4052311,"lon":113.9645058},{"id":"180","routes":["505"],"nameCh":"\u5c71\u666f(\u5317)","nameEn":"Shan King (North)","lat":22.3985084,"lon":113.9668019},{"id":"190","routes":["505"],"nameCh":"\u5c71\u666f(\u5357)","nameEn":"Shan King (South)","lat":22.3965922,"lon":113.9661572},{"id":"170","routes":["505","615P","610","615"],"nameCh":"\u77f3\u6392","nameEn":"Shek Pai","lat":22.4013692,"lon":113.9677639},{"id":"560","routes":["610","614","615","761P"],"nameCh":"\u6c34\u908a\u570d","nameEn":"Shui Pin Wai","lat":22.4444798,"lon":114.0202344},{"id":"240","routes":["507","614P","614"],"nameCh":"\u5146\u79a7","nameEn":"Siu Hei","lat":22.3751808,"lon":113.9669115},{"id":"100","routes":["505","614P","615P","610","614","615","751"],"nameCh":"\u5146\u5eb7","nameEn":"Siu Hong","lat":22.4119912,"lon":113.9782568},{"id":"265","routes":["505","507","614P","614"],"nameCh":"\u5146\u9e9f","nameEn":"Siu Lun","lat":22.3845825,"lon":113.9750653},{"id":"212","routes":["507","610"],"nameCh":"\u5927\u8208(\u5317)","nameEn":"Tai Hing (North)","lat":22.4045366,"lon":113.9701384},{"id":"220","routes":["507","610"],"nameCh":"\u5927\u8208(\u5357)","nameEn":"Tai Hing (South)","lat":22.402737,"lon":113.9721085},{"id":"590","routes":["610","614","615","761P"],"nameCh":"\u5927\u68e0\u8def","nameEn":"Tai Tong Road","lat":22.4444678,"lon":114.0295529},{"id":"480","routes":["705","706","751","761P"],"nameCh":"\u5929\u5bcc","nameEn":"Tin Fu","lat":22.4645697,"lon":113.9977215},{"id":"540","routes":["705","706"],"nameCh":"\u5929\u6052","nameEn":"Tin Heng","lat":22.4697339,"lon":114.00083},{"id":"140","routes":["505","507","615P","615"],"nameCh":"\u7530\u666f","nameEn":"Tin King","lat":22.4078096,"lon":113.9665287},{"id":"520","routes":["705","706"],"nameCh":"\u5929\u79c0","nameEn":"Tin Sau","lat":22.4655398,"lon":114.0029634},{"id":"460","routes":["705","706","761P"],"nameCh":"\u5929\u745e","nameEn":"Tin Shui","lat":22.455891,"lon":113.9994535},{"id":"430","routes":["705","706","751"],"nameCh":"\u5929\u6c34\u570d","nameEn":"Tin Shui Wai","lat":22.44941,"lon":114.0060096},{"id":"435","routes":["705","706","751"],"nameCh":"\u5929\u6148","nameEn":"Tin Tsz","lat":22.4527213,"lon":114.0060782},{"id":"500","routes":["705","706","751"],"nameCh":"\u5929\u69ae","nameEn":"Tin Wing","lat":22.4595311,"lon":114.0028268},{"id":"450","routes":["705","706","751"],"nameCh":"\u5929\u6e56","nameEn":"Tin Wu","lat":22.4549718,"lon":114.0057192},{"id":"550","routes":["705","706","751","761P"],"nameCh":"\u5929\u9038","nameEn":"Tin Yat","lat":22.4669218,"lon":113.9990795},{"id":"445","routes":["705","706","761P"],"nameCh":"\u5929\u8000","nameEn":"Tin Yiu","lat":22.4503875,"lon":114.0027686},{"id":"510","routes":["705","706"],"nameCh":"\u5929\u6085","nameEn":"Tin Yuet","lat":22.462807,"lon":114.001654},{"id":"390","routes":["610","614","615","761P"],"nameCh":"\u5858\u574a\u6751","nameEn":"Tong Fong Tsuen","lat":22.4402494,"lon":114.0073832},{"id":"280","routes":["505","507","614P","614","751"],"nameCh":"\u5e02\u4e2d\u5fc3","nameEn":"Town Centre","lat":22.3913803,"lon":113.974973},{"id":"040","routes":["615P","610","615"],"nameCh":"\u9752\u5c71\u6751","nameEn":"Tsing Shan Tsuen","lat":22.3907254,"lon":113.9672011},{"id":"050","routes":["615P","610","615"],"nameCh":"\u9752\u96f2","nameEn":"Tsing Wun","lat":22.3943809,"lon":113.9674685},{"id":"295","routes":["505","507","751"],"nameCh":"\u5c6f\u9580","nameEn":"Tuen Mun","lat":22.3938418,"lon":113.973039},{"id":"001","routes":["507","614P","615P","610","614","615"],"nameCh":"\u5c6f\u9580\u78bc\u982d","nameEn":"Tuen Mun Ferry Pier","lat":22.3726481,"lon":113.9667048},{"id":"090","routes":["610","751"],"nameCh":"\u5c6f\u9580\u91ab\u9662","nameEn":"Tuen Mun Hospital","lat":22.4078234,"lon":113.9771509},{"id":"250","routes":["507","614P","614"],"nameCh":"\u5c6f\u9580\u6cf3\u6c60","nameEn":"Tuen Mun Swimming Pool","lat":22.3812061,"lon":113.9703786},{"id":"530","routes":["705","706"],"nameCh":"\u6fd5\u5730\u516c\u5712","nameEn":"Wetland Park","lat":22.4695595,"lon":114.0025635},{"id":"275","routes":["751"],"nameCh":"\u53cb\u611b","nameEn":"Yau Oi","lat":22.3866677,"lon":113.9735606},{"id":"600","routes":["610","614","615","761P"],"nameCh":"\u5143\u6717","nameEn":"Yuen Long","lat":22.4456351,"lon":114.0348489}]')},17:function(e,n,t){e.exports={row:"ResultRow_row__2f4S9",platformId:"ResultRow_platformId__HU7X0",route:"ResultRow_route__LRm5F",destination:"ResultRow_destination__3LOX7",time:"ResultRow_time__1ilG1"}},185:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(67),i=t.n(o),s=(t(83),t(21)),c=t(3),u=t(14),l=t(2),m=t(68),d=t.n(m),h=t(1);var j=function(){return Object(h.jsx)("div",{className:d.a.page,children:Object(h.jsxs)("ul",{children:[Object(h.jsxs)("li",{children:["The light rail data are from the HK government and DATA.GOV.HK. For details, please see ",Object(h.jsx)("a",{href:"https://data.gov.hk/en/terms-and-conditions",target:"_blank",rel:"noreferrer noopener",children:"DATA.GOV.HK"}),". We acknowledge the Government ownership of the intellectual property rights in the Data."]}),Object(h.jsxs)("li",{children:["The geographical data are provided by Overpass API. Please see ",Object(h.jsx)("a",{href:"https://wiki.openstreetmap.org/wiki/Overpass_API",target:"_blank",rel:"noreferrer noopener",children:"Overpass API"})," for details."]}),Object(h.jsxs)("li",{children:["We use third party libraries. For licenses, please see ",Object(h.jsx)("a",{href:"https://github.com/lightrailpassenger/lighter",target:"_blank",rel:"noreferrer noopener",children:"Lighter GitHub repository"})," for details."]})]})})},b=t(32),p=t.n(b);var f=function(){return Object(h.jsxs)("div",{className:p.a.header,children:[Object(h.jsx)("h1",{className:p.a.title,children:"Lighter"}),Object(h.jsx)("h2",{className:p.a.description,children:"A lightweight light rail utility"})]})},g=t(5),O=t(33),_=t.n(O);var C=function(e){var n=e.centerX,t=e.centerY,r=e.zoomLevel,o=e.markers,i=e.onViewChange,s=e.onMarkerClick,c=Object(a.useRef)(null),u=Object(a.useRef)(null);return Object(a.useLayoutEffect)((function(){u.current&&(c.current=_.a.map(u.current),_.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(c.current),u.current.style.width="100%",u.current.style.height="100%")}),[]),Object(a.useLayoutEffect)((function(){var e=function(){if(c.current){var e=c.current.getCenter(),n=e.lat,t=e.lng,a=c.current.getZoom();i(n,t,a)}};return c.current&&(c.current.on("zoomend",e),c.current.on("moveend",e)),function(){c.current&&(c.current.off("zoomend",e),c.current.off("moveend",e))}}),[i]),Object(a.useLayoutEffect)((function(){if(c.current){var e,n=Object(g.a)(o);try{var t=function(){var n=e.value,t=n.id,a=n.lat,r=n.lon,o=_.a.marker([a,r]);o.on("click",(function(){s(t)})),o.addTo(c.current)};for(n.s();!(e=n.n()).done;)t()}catch(a){n.e(a)}finally{n.f()}}}),[o,s]),Object(a.useLayoutEffect)((function(){c.current&&c.current.setView([n,t],r)}),[n,t,r]),Object(h.jsx)("div",{ref:u})},v=t(69),E=t.n(v);var P=function(e){var n=e.centerX,t=e.centerY,r=e.zoomLevel,o=e.markers,i=e.onViewChange,s=Object(l.f)(),c=Object(a.useCallback)((function(e){s("/result/".concat(e))}),[s]);return Object(h.jsx)("div",{className:E.a.mapPage,children:Object(h.jsx)(C,{centerX:n,centerY:t,zoomLevel:r,markers:o,onMarkerClick:c,onViewChange:i})})},x=t(70),L=t.n(x);var S=function(e){var n=e.name,t=e.path,r=Object(l.f)(),o=Object(a.useCallback)((function(e){e.preventDefault(),r(t)}),[r,t]);return Object(h.jsx)("a",{className:L.a.item,href:"/#".concat(t),onClick:o,children:n})},T=t(71),k=t.n(T);var N=function(){return Object(h.jsxs)("div",{className:k.a.navigation,children:[Object(h.jsx)(S,{name:"Map",path:"/"}),Object(h.jsx)(S,{name:"Station List",path:"/list"}),Object(h.jsx)(S,{name:"Attribution",path:"/attribution"})]})},w=t(42),R=t.n(w),y=t(72),B=t(17),H=t.n(B);var I=function(e){var n=e.platformId,t=e.route,a=e.destination,r=e.trainLength,o=e.time;return Object(h.jsxs)("div",{className:H.a.row,children:[Object(h.jsx)("span",{className:H.a.platformId,children:n}),Object(h.jsxs)("span",{className:H.a.route,children:[t,"number"===typeof r?new Array(r).fill(0).map((function(){return"\ud83d\ude8b"})).join(""):r]}),Object(h.jsx)("span",{className:H.a.destination,children:a}),Object(h.jsx)("span",{className:H.a.time,children:o})]})},M=t(6),W=M.c().shape({platform_list:M.a().of(M.c().shape({platform_id:M.b().required(),route_list:M.a().of(M.c().shape({train_length:M.b().integer().positive().required(),route_no:M.d().required(),time_en:M.d().required(),dest_en:M.d().required()}).required()).required()}).required()).required()}).required(),A=t(16),K=t(44),z=t.n(K);var F=function(){var e=Object(l.g)().stationId,n=Object(a.useState)(),t=Object(c.a)(n,2),r=t[0],o=t[1];Object(a.useEffect)((function(){var n=!1;return Object(y.a)(R.a.mark((function t(){var a,r,i;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat("https://rt.data.gov.hk/v1/transport/mtr/lrt/getSchedule?station_id=").concat(e),{mode:"cors",method:"GET"});case 3:return a=t.sent,t.next=6,a.json();case 6:return r=t.sent,t.next=9,W.validate(r);case 9:i=t.sent,n||o(i),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),window.location.reload();case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))(),function(){n=!0}}),[e]);var i=Object(a.useMemo)((function(){var n=A.find((function(n){return n.id===e}));return n?"".concat(n.nameEn," ").concat(n.nameCh):""}),[e]);return Object(h.jsxs)("div",{className:z.a.page,children:[Object(h.jsx)("h3",{className:z.a.stationName,children:i}),Object(h.jsx)(I,{platformId:"Platform",trainLength:"",route:"Route",time:"Time of arrivals",destination:"Destination"}),r&&r.platform_list.flatMap((function(e){var n=e.platform_id;return e.route_list.flatMap((function(e){var t=e.train_length,a=e.route_no,r=e.time_en,o=e.dest_en;return Object(h.jsx)(I,{platformId:n,trainLength:t,route:a,time:r,destination:o},"".concat(n,"-").concat(t,"-").concat(a,"-").concat(r,"-").concat(o))}))}))]})},G=t(30),V=t(77),Y=t(78),q=t(23),D=t.n(q);var X=function(e){var n=e.id,t=e.nameEn,r=e.nameCh,o=Object(l.f)(),i=Object(a.useCallback)((function(e){e.preventDefault(),o("/result/".concat(n))}),[o,n]);return Object(h.jsxs)("div",{className:D.a.row,children:[Object(h.jsx)("span",{className:D.a.name,children:"".concat(t," ").concat(r)}),Object(h.jsx)("span",{className:D.a.space}),Object(h.jsx)("a",{className:D.a.button,href:"/#/result/".concat(n),onClick:i,children:"Go"})]})},U=t(8),J=t.n(U),Z=["505","507","610","614","615","614P","615P","705","706","751","751P","761P"];var Q=function(){var e=Object(a.useState)((function(){return Object.fromEntries(Z.map((function(e){return[e,!0]})))})),n=Object(c.a)(e,2),t=n[0],r=n[1],o=Object.entries(t).sort((function(e,n){var t=Object(c.a)(e,1)[0],a=Object(c.a)(n,1)[0];return t.localeCompare(a)})).map((function(e){var n=Object(c.a)(e,2),t=n[0],a=n[1];return Object(h.jsx)("button",{className:"".concat(J.a.routeButton).concat(a?" ".concat(J.a.routeButton__enabled):""),onClick:function(){r((function(e){var n=e[t],a=Object(V.a)(e,[t].map(Y.a));return Object(s.a)(Object(G.a)({},t,!n),a)}))},children:t})})),i=Object.entries(t).filter((function(e){var n=Object(c.a)(e,2);n[0];return n[1]})).map((function(e){return Object(c.a)(e,1)[0]})),u=A.filter((function(e){return e.routes.some((function(e){return i.includes(e)}))})).map((function(e){var n=e.id,t=e.nameEn,a=e.nameCh;return Object(h.jsx)(X,{id:n,nameEn:t,nameCh:a},t)}));return Object(h.jsxs)("div",{className:J.a.page,children:[Object(h.jsxs)("div",{className:J.a.routeButtonList,children:[Object(h.jsx)("div",{className:J.a.routeButtonListRouteButton,children:o}),Object(h.jsx)("div",{className:J.a.actionButton,children:Object(h.jsx)("button",{className:J.a.routeButton,onClick:Object(a.useCallback)((function(){r((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var n=Object(c.a)(e,2),t=n[0];n[1];return[t,!1]})))}))}),[]),children:"Clear"})})]}),u.length?u:Object(h.jsx)("div",{className:J.a.placeholder,children:"Choose a route"})]})},$=t(76),ee=t.n($);var ne=function(){var e=Object(a.useState)({centerX:22.42,centerY:114,zoomLevel:13}),n=Object(c.a)(e,2),t=n[0],r=n[1],o=Object(a.useCallback)((function(e,n,t){r({centerX:e,centerY:n,zoomLevel:t})}),[]);return Object(h.jsx)("div",{className:ee.a.app,children:Object(h.jsxs)(u.a,{children:[Object(h.jsx)(f,{}),Object(h.jsx)(N,{}),Object(h.jsxs)(l.c,{children:[Object(h.jsx)(l.a,{path:"/",element:Object(h.jsx)(P,Object(s.a)(Object(s.a)({},t),{},{markers:A,onViewChange:o}))}),Object(h.jsx)(l.a,{path:"/list",element:Object(h.jsx)(Q,{})}),Object(h.jsx)(l.a,{path:"/result/:stationId",element:Object(h.jsx)(F,{})}),Object(h.jsx)(l.a,{path:"/attribution",element:Object(h.jsx)(j,{})})]})]})})};i.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(ne,{})}),document.getElementById("root"))},23:function(e,n,t){e.exports={row:"StationListItem_row__IkSWH",name:"StationListItem_name__BmMHv",space:"StationListItem_space__1WC6A",button:"StationListItem_button__V2kGs"}},32:function(e,n,t){e.exports={header:"Header_header__34Mnk",title:"Header_title__R3bRx",description:"Header_description__1RdZ8"}},44:function(e,n,t){e.exports={page:"ResultPage_page__3ySjD",stationName:"ResultPage_stationName__39vU4"}},68:function(e,n,t){e.exports={page:"AttributionPage_page__1PVOg"}},69:function(e,n,t){e.exports={mapPage:"MapPage_mapPage__1Lb_1"}},70:function(e,n,t){e.exports={item:"NavigationItem_item__3kr6W"}},71:function(e,n,t){e.exports={navigation:"Navigation_navigation__1Kgbb"}},76:function(e,n,t){e.exports={app:"App_app__2ziFi"}},8:function(e,n,t){e.exports={page:"StationListPage_page__2VcSW",routeButtonList:"StationListPage_routeButtonList__1hPdh",routeButtonListRouteButton:"StationListPage_routeButtonListRouteButton__WzmCg",placeholder:"StationListPage_placeholder__BLUvt",actionButton:"StationListPage_actionButton__2WFCu",routeButton:"StationListPage_routeButton__1IH7p",routeButton__enabled:"StationListPage_routeButton__enabled__225u_"}},83:function(e,n,t){}},[[185,1,2]]]);
//# sourceMappingURL=main.5f928799.chunk.js.map