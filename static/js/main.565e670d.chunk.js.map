{"version":3,"sources":["ResultRow.module.scss","Header.tsx","Map.tsx","MapPage.tsx","NavigationItem.tsx","Navigation.tsx","ResultRow.tsx","schemas/ETAResultSchema.tsx","ResultPage.tsx","StationListPage.tsx","App.tsx","index.tsx","Header.module.scss","ResultPage.module.scss","MapPage.module.scss","NavigationItem.module.scss","Navigation.module.scss","App.module.scss"],"names":["module","exports","Header","className","styles","header","title","description","Map","props","centerX","centerY","zoomLevel","markers","onMarkerClick","mapRef","useRef","ref","useLayoutEffect","current","L","map","tileLayer","attribution","addTo","style","width","height","marker","id","lat","lon","markerElement","on","setView","MapPage","onViewChange","navigate","useNavigate","handleMarkerClick","useCallback","mapPage","NavigationItem","name","path","handleClick","event","preventDefault","item","href","onClick","Navigation","navigation","ResultRow","platformId","route","destination","trainLength","time","row","schema","yup","shape","of","required","integer","positive","ResultPage","stationId","useParams","useState","result","setResult","useEffect","isIgnored","a","fetch","mode","method","res","json","etaResultSchema","validate","validatedResult","stationName","useMemo","station","routeData","find","nameEn","nameCh","page","platform_list","flatMap","platform_id","route_list","train_length","route_no","time_en","dest_en","StationListPage","App","mapView","setMapView","handleViewChange","app","element","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"sFACAA,EAAOC,QAAU,CAAC,IAAM,uBAAuB,WAAa,8BAA8B,MAAQ,yBAAyB,YAAc,+BAA+B,YAAc,+BAA+B,KAAO,0B,2ICY7MC,MATf,WACE,OACE,sBAAKC,UAAWC,IAAOC,OAAvB,UACE,oBAAIF,UAAWC,IAAOE,MAAtB,qBACA,oBAAIH,UAAWC,IAAOG,YAAtB,kD,wBCkDSC,MAvCf,SAAaC,GACX,IAAQC,EAAwDD,EAAxDC,QAASC,EAA+CF,EAA/CE,QAASC,EAAsCH,EAAtCG,UAAWC,EAA2BJ,EAA3BI,QAASC,EAAkBL,EAAlBK,cACxCC,EAASC,iBAAuB,MAChCC,EAAMD,iBAA8B,MA+B1C,OA7BAE,2BAAgB,WACVD,EAAIE,UACNJ,EAAOI,QAAUC,IAAEC,IAAIJ,EAAIE,SAC3BC,IAAEE,UAAU,qDAAsD,CAChEC,YAAa,wFAEZC,MAAMT,EAAOI,SAChBF,EAAIE,QAAQM,MAAMC,MAAQ,OAC1BT,EAAIE,QAAQM,MAAME,OAAS,UAE5B,IACHT,2BAAgB,WACd,GAAIH,EAAOI,QAAS,CAAC,IAAD,gBACCN,GADD,yBACTe,EADS,QAERC,EAAiBD,EAAjBC,GAAIC,EAAaF,EAAbE,IAAKC,EAAQH,EAARG,IACXC,EAAgBZ,IAAEQ,OAAO,CAACE,EAAKC,IACrCC,EAAcC,GAAG,SAAS,WACxBnB,EAAce,MAEhBG,EAAcR,MAAMT,EAAOI,UAN7B,2BAA6B,IADX,kCAUnB,CAACN,EAASC,IACbI,2BAAgB,WACVH,EAAOI,SACTJ,EAAOI,QAAQe,QAAQ,CAACxB,EAASC,GAAUC,KAE5C,CAACF,EAASC,EAASC,IAGpB,qBAAKK,IAAKA,K,iBCNCkB,MA5Bf,SAAiB1B,GACf,IACEC,EAKED,EALFC,QACAC,EAIEF,EAJFE,QACAC,EAGEH,EAHFG,UACAC,EAEEJ,EAFFI,QACAuB,EACE3B,EADF2B,aAGIC,EAAWC,cACXC,EAAoBC,uBAAY,SAACX,GACrCQ,EAAS,WAAD,OAAYR,MACnB,CAACQ,IAEJ,OACE,qBAAKlC,UAAWC,IAAOqC,QAAvB,SACE,cAAC,EAAD,CACE/B,QAASA,EACTC,QAASA,EACTC,UAAWA,EACXC,QAASA,EACTC,cAAeyB,EACfH,aAAcA,O,iBCfPM,MAhBf,SAAwBjC,GACtB,IACEkC,EAEElC,EAFFkC,KACAC,EACEnC,EADFmC,KAEIP,EAAWC,cACXO,EAAcL,uBAAY,SAACM,GAC/BA,EAAMC,iBACNV,EAASO,KACR,CAACP,EAAUO,IAEd,OACE,mBAAGzC,UAAWC,IAAO4C,KAAMC,KAAML,EAAMM,QAASL,EAAhD,SAA8DF,K,iBCPnDQ,MAVf,WACE,OACE,sBAAKhD,UAAWC,IAAOgD,WAAvB,UACE,cAAC,EAAD,CAAgBT,KAAK,MAAMC,KAAK,MAChC,cAAC,EAAD,CAAgBD,KAAK,eAAeC,KAAK,UACzC,cAAC,EAAD,CAAgBD,KAAK,mBAAmBC,KAAK,U,0CCqBpCS,MApBf,SAAmB5C,GACjB,IACE6C,EAKE7C,EALF6C,WACAC,EAIE9C,EAJF8C,MACAC,EAGE/C,EAHF+C,YACAC,EAEEhD,EAFFgD,YACAC,EACEjD,EADFiD,KAGF,OACE,sBAAKvD,UAAWC,IAAOuD,IAAvB,UACE,sBAAMxD,UAAWC,IAAOkD,WAAxB,SAAqCA,IACrC,sBAAMnD,UAAWC,IAAOmD,MAAxB,SAAgCA,IAChC,sBAAMpD,UAAWC,IAAOqD,YAAxB,SAAsCA,IACtC,sBAAMtD,UAAWC,IAAOoD,YAAxB,SAAsCA,IACtC,sBAAMrD,UAAWC,IAAOsD,KAAxB,SAA+BA,Q,OCAtBE,EAbAC,MAAaC,MAAM,CAChC,cAAiBD,MAAYE,GAAGF,MAAaC,MAAM,CACjD,YAAeD,MAAaG,WAC5B,WAAcH,MAAYE,GAAGF,MAAaC,MAAM,CAC9C,aAAgBD,MAAaI,UAAUC,WAAWF,WAClD,SAAYH,MAAaG,WACzB,QAAWH,MAAaG,WACxB,QAAWH,MAAaG,aACvBA,YAAYA,aACdA,YAAYA,aACdA,W,yBC6CYG,MAvDf,WACE,IAAQC,EAAcC,cAAdD,UAER,EAA4BE,qBAA5B,mBAAOC,EAAP,KAAeC,EAAf,KAEAC,qBAAU,WACR,IAAIC,GAAY,EAWhB,OAVA,sBAAC,gCAAAC,EAAA,sEACmBC,MAAM,GAAD,OAVP,uEAUO,OAAoBR,GAAa,CAAES,KAAM,OAAQC,OAAQ,QADjF,cACOC,EADP,gBAEsBA,EAAIC,OAF1B,cAEOT,EAFP,gBAG+BU,EAAgBC,SAASX,GAHxD,OAGOY,EAHP,OAKMT,GACHF,EAAUW,GANb,2CAAD,GAUO,WACLT,GAAY,KAEb,CAACN,IAEJ,IAAMgB,EAAcC,mBAAQ,WAC1B,IAAMC,EAAUC,EAAUC,MAAK,qBAAG3D,KAAiBuC,KACnD,OAAOkB,EAAO,UAAMA,EAAQG,OAAd,YAAwBH,EAAQI,QAAW,KACxD,CAACtB,IAEJ,OACE,sBAAKjE,UAAWC,IAAOuF,KAAvB,UACE,oBAAIxF,UAAWC,IAAOgF,YAAtB,SAAoCA,IACpC,cAAC,EAAD,CACE9B,WAAW,WACXG,YAAY,cACZF,MAAM,QACNG,KAAK,mBACLF,YAAY,gBAGde,GACAA,EAAOqB,cAAcC,SAAQ,YAAkC,IAA/BC,EAA8B,EAA9BA,YAC9B,OAD4D,EAAjBC,WACzBF,SAAQ,gBAAGG,EAAH,EAAGA,aAAcC,EAAjB,EAAiBA,SAAUC,EAA3B,EAA2BA,QAASC,EAApC,EAAoCA,QAApC,OACxB,cAAC,EAAD,CAEE7C,WAAYwC,EACZrC,YAAauC,EACbzC,MAAO0C,EACPvC,KAAMwC,EACN1C,YAAa2C,GANf,UACUL,EADV,YACyBE,EADzB,YACyCC,EADzC,YACqDC,EADrD,YACgEC,cClD3DC,MAJf,WACE,OAAO,yB,iBCuDMC,MA5Cf,WACE,MAA8B/B,mBAI3B,CACD5D,QAAS,MACTC,QAAS,IACTC,UAAW,KAPb,mBAAO0F,EAAP,KAAgBC,EAAhB,KAUMC,EAAmBhE,uBAAY,SACnC9B,EACAC,EACAC,GAEA2F,EAAW,CACT7F,UACAC,UACAC,gBAED,IAEH,OACE,qBAAKT,UAAWC,IAAOqG,IAAvB,SACE,eAAC,IAAD,WACE,cAAC,EAAD,IACA,cAAC,EAAD,IACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAO7D,KAAK,IAAI8D,QACd,cAAC,EAAD,2BAAaJ,GAAb,IAAsBzF,QAAS0E,EAAWnD,aAAcoE,OAE1D,cAAC,IAAD,CAAO5D,KAAK,QAAQ8D,QAClB,cAAC,EAAD,MAEF,cAAC,IAAD,CAAO9D,KAAK,qBAAqB8D,QAC/B,cAAC,EAAD,eC7CZC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,U,w5yCCR1B/G,EAAOC,QAAU,CAAC,OAAS,uBAAuB,MAAQ,sBAAsB,YAAc,8B,mBCA9FD,EAAOC,QAAU,CAAC,KAAO,yBAAyB,YAAc,kC,mBCAhED,EAAOC,QAAU,CAAC,QAAU,2B,mBCA5BD,EAAOC,QAAU,CAAC,KAAO,+B,mBCAzBD,EAAOC,QAAU,CAAC,WAAa,iC,mBCA/BD,EAAOC,QAAU,CAAC,IAAM,mB","file":"static/js/main.565e670d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"ResultRow_row__2f4S9\",\"platformId\":\"ResultRow_platformId__HU7X0\",\"route\":\"ResultRow_route__LRm5F\",\"destination\":\"ResultRow_destination__3LOX7\",\"trainLength\":\"ResultRow_trainLength__1ufc4\",\"time\":\"ResultRow_time__1ilG1\"};","import React from \"react\";\n\nimport styles from \"./Header.module.scss\";\n\nfunction Header() {\n  return (\n    <div className={styles.header}>\n      <h1 className={styles.title}>Lighter</h1>\n      <h2 className={styles.description}>A lightweight light rail utility</h2>\n    </div>\n  );\n}\n\nexport default Header;\n","import React, {\n  useRef,\n  useLayoutEffect,\n} from \"react\";\nimport L, { Map as MapType } from \"leaflet\";\n\ninterface MapProps {\n  centerX: number;\n  centerY: number;\n  zoomLevel: number;\n  markers: Array<{\n    lat: number,\n    lon: number,\n    id: string,\n  }>;\n  onMarkerClick(id: string): void;\n  onViewChange(centerX: number, centerY: number, zoomLevel: number): void;\n}\n\nfunction Map(props: MapProps) {\n  const { centerX, centerY, zoomLevel, markers, onMarkerClick } = props;\n  const mapRef = useRef<MapType | null>(null);\n  const ref = useRef<HTMLDivElement | null>(null);\n\n  useLayoutEffect(() => {\n    if (ref.current) {\n      mapRef.current = L.map(ref.current);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; <a href=\"https://openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n      })\n        .addTo(mapRef.current);\n      ref.current.style.width = '100%';\n      ref.current.style.height = '100%';\n    }\n  }, []);\n  useLayoutEffect(() => {\n    if (mapRef.current) {\n      for (let marker of markers) {\n        const { id, lat, lon } = marker;\n        const markerElement = L.marker([lat, lon]);\n        markerElement.on('click', () => {\n          onMarkerClick(id);\n        });\n        markerElement.addTo(mapRef.current);\n      }\n    }\n  }, [markers, onMarkerClick]);\n  useLayoutEffect(() => {\n    if (mapRef.current) {\n      mapRef.current.setView([centerX, centerY], zoomLevel);\n    }\n  }, [centerX, centerY, zoomLevel]);\n\n  return (\n    <div ref={ref} />\n  );\n}\n\nexport default Map;\n","import React, { useCallback } from \"react\";\n\nimport { useNavigate } from \"react-router-dom\";\n\nimport Map from \"./Map\";\n\nimport styles from \"./MapPage.module.scss\";\n\ninterface MapPageProps {\n  centerX: number;\n  centerY: number;\n  zoomLevel: number;\n  markers: Array<{\n    id: string,\n    lat: number,\n    lon: number,\n  }>;\n  onViewChange(centerX: number, centerY: number, zoomLevel: number): void;\n}\n\nfunction MapPage(props: MapPageProps) {\n  const {\n    centerX,\n    centerY,\n    zoomLevel,\n    markers,\n    onViewChange\n  } = props;\n\n  const navigate = useNavigate();\n  const handleMarkerClick = useCallback((id: string) => {\n    navigate(`/result/${id}`);\n  }, [navigate]);\n\n  return (\n    <div className={styles.mapPage}>\n      <Map\n        centerX={centerX}\n        centerY={centerY}\n        zoomLevel={zoomLevel}\n        markers={markers}\n        onMarkerClick={handleMarkerClick}\n        onViewChange={onViewChange}\n      />\n    </div>\n  );\n}\n\nexport default MapPage;\n","import React, { useCallback } from \"react\";\n\nimport { useNavigate } from \"react-router-dom\";\n\nimport styles from \"./NavigationItem.module.scss\";\n\ninterface NavigationItemProps {\n  name: string;\n  path: string;\n}\n\nfunction NavigationItem(props: NavigationItemProps) {\n  const {\n    name,\n    path,\n  } = props;\n  const navigate = useNavigate();\n  const handleClick = useCallback((event) => {\n    event.preventDefault();\n    navigate(path);\n  }, [navigate, path]);\n\n  return (\n    <a className={styles.item} href={path} onClick={handleClick}>{name}</a>\n  );\n}\n\nexport default NavigationItem;\n","import React from \"react\";\n\nimport NavigationItem from \"./NavigationItem\";\n\nimport styles from \"./Navigation.module.scss\";\n\nfunction Navigation() {\n  return (\n    <div className={styles.navigation}>\n      <NavigationItem name=\"Map\" path=\"/\" />\n      <NavigationItem name=\"Station List\" path=\"/list\" />\n      <NavigationItem name=\"Time of Arrivals\" path=\"/\" />\n    </div>\n  )\n}\n\nexport default Navigation;\n","import React from \"react\";\n\nimport styles from \"./ResultRow.module.scss\";\n\ninterface ResultRowProps {\n  platformId: string | number;\n  route: string;\n  destination: string;\n  trainLength: string | number;\n  time: string;\n}\n\nfunction ResultRow(props: ResultRowProps) {\n  const {\n    platformId,\n    route,\n    destination,\n    trainLength,\n    time,\n  } = props;\n\n  return (\n    <div className={styles.row}>\n      <span className={styles.platformId}>{platformId}</span>\n      <span className={styles.route}>{route}</span>\n      <span className={styles.trainLength}>{trainLength}</span>\n      <span className={styles.destination}>{destination}</span>\n      <span className={styles.time}>{time}</span>\n    </div>\n  );\n}\n\nexport default ResultRow;\n","import * as yup from \"yup\";\n\ntype ETAResultType = {\n  \"platform_list\": Array<{\n    \"platform_id\": number;\n    \"route_list\": Array<{\n      \"train_length\": number,\n      \"route_no\": string,\n      \"time_en\": string,\n      \"dest_en\": string,\n    }>\n  }>;\n};\n\nconst schema = yup.object().shape({\n  \"platform_list\": yup.array().of(yup.object().shape({\n    \"platform_id\": yup.number().required(),\n    \"route_list\": yup.array().of(yup.object().shape({\n      \"train_length\": yup.number().integer().positive().required(),\n      \"route_no\": yup.string().required(),\n      \"time_en\": yup.string().required(),\n      \"dest_en\": yup.string().required(),\n    }).required()).required(),\n  }).required()).required(),\n}).required();\n\nexport type { ETAResultType };\nexport default schema;\n","import React, { useEffect, useMemo, useState } from \"react\";\n\nimport { useParams } from \"react-router-dom\";\n\nimport ResultRow from \"./ResultRow\";\n\nimport etaResultSchema, { ETAResultType } from \"./schemas/ETAResultSchema\";\n\nimport routeData from \"./route_data.json\";\n\nimport styles from \"./ResultPage.module.scss\";\n\nconst DATA_ENDPOINT = \"https://rt.data.gov.hk/v1/transport/mtr/lrt/getSchedule?station_id=\";\n\nfunction ResultPage() {\n  const { stationId } = useParams();\n\n  const [result, setResult] = useState<ETAResultType | undefined>();\n\n  useEffect(() => {\n    let isIgnored = false;\n    (async () => {\n      const res = await fetch(`${DATA_ENDPOINT}${stationId}`, { mode: 'cors', method: 'GET' });\n      const result = await res.json();\n      const validatedResult = await etaResultSchema.validate(result);\n\n      if (!isIgnored) {\n        setResult(validatedResult);\n      }\n    })();\n\n    return () => {\n      isIgnored = true;\n    };\n  }, [stationId]);\n\n  const stationName = useMemo(() => {\n    const station = routeData.find(({ id }) => (id === stationId));\n    return station ? `${station.nameEn} ${station.nameCh}` : '';\n  }, [stationId]);\n\n  return (\n    <div className={styles.page}>\n      <h3 className={styles.stationName}>{stationName}</h3>\n      <ResultRow\n        platformId=\"Platform\"\n        trainLength=\"# Trains(s)\"\n        route=\"Route\"\n        time=\"Time of arrivals\"\n        destination=\"Destination\"\n      />\n      {\n      result &&\n      result.platform_list.flatMap(({ platform_id, route_list }) => {\n        return route_list.flatMap(({ train_length, route_no, time_en, dest_en }) => (\n          <ResultRow\n            key={`${platform_id}-${train_length}-${route_no}-${time_en}-${dest_en}`}\n            platformId={platform_id}\n            trainLength={train_length}\n            route={route_no}\n            time={time_en}\n            destination={dest_en}\n          />\n        ));\n      })\n    }</div>\n  );\n}\n\nexport default ResultPage;\n","import React from \"react\";\n\nfunction StationListPage() {\n  return <div />;\n}\n\nexport default StationListPage;\n","import React, { useCallback, useState } from \"react\";\n\nimport { HashRouter, Routes, Route } from \"react-router-dom\";\n\nimport Header from \"./Header\";\nimport MapPage from \"./MapPage\";\nimport Navigation from \"./Navigation\";\nimport ResultPage from \"./ResultPage\";\nimport StationListPage from \"./StationListPage\";\n\nimport routeData from \"./route_data.json\";\n\nimport styles from \"./App.module.scss\";\n\nfunction App() {\n  const [mapView, setMapView] = useState<{\n    centerX: number,\n    centerY: number,\n    zoomLevel: number,\n  }>({\n    centerX: 22.42,\n    centerY: 114,\n    zoomLevel: 13,\n  });\n\n  const handleViewChange = useCallback((\n    centerX: number,\n    centerY: number,\n    zoomLevel: number\n  ) => {\n    setMapView({\n      centerX,\n      centerY,\n      zoomLevel,\n    });\n  }, []);\n\n  return (\n    <div className={styles.app}>\n      <HashRouter>\n        <Header />\n        <Navigation />\n        <Routes>\n          <Route path=\"/\" element={\n            <MapPage {...mapView} markers={routeData} onViewChange={handleViewChange} />\n          } />\n          <Route path=\"/list\" element={\n            <StationListPage />\n          } />\n          <Route path=\"/result/:stationId\" element={\n            <ResultPage />\n          } />\n        </Routes>\n      </HashRouter>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__34Mnk\",\"title\":\"Header_title__R3bRx\",\"description\":\"Header_description__1RdZ8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"ResultPage_page__3ySjD\",\"stationName\":\"ResultPage_stationName__39vU4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mapPage\":\"MapPage_mapPage__1Lb_1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"NavigationItem_item__3kr6W\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navigation\":\"Navigation_navigation__1Kgbb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__2ziFi\"};"],"sourceRoot":""}