{"version":3,"sources":["ResultRow.module.scss","AttributionPage.tsx","Header.tsx","Map.tsx","MapPage.tsx","NavigationItem.tsx","Navigation.tsx","ResultRow.tsx","schemas/ETAResultSchema.tsx","ResultPage.tsx","StationListItem.tsx","StationListPage.tsx","App.tsx","index.tsx","StationListItem.module.scss","Header.module.scss","ResultPage.module.scss","AttributionPage.module.scss","MapPage.module.scss","NavigationItem.module.scss","Navigation.module.scss","App.module.scss","StationListPage.module.scss"],"names":["module","exports","AttributionPage","className","styles","page","href","target","rel","Header","header","title","description","Map","props","centerX","centerY","zoomLevel","markers","onViewChange","onMarkerClick","mapRef","useRef","ref","useLayoutEffect","current","L","map","tileLayer","attribution","addTo","style","width","height","handler","getCenter","lat","lng","getZoom","on","off","marker","id","lon","markerElement","setView","MapPage","navigate","useNavigate","handleMarkerClick","useCallback","mapPage","NavigationItem","name","path","handleClick","event","preventDefault","item","onClick","Navigation","navigation","ResultRow","platformId","route","destination","trainLength","time","row","Array","fill","join","schema","yup","shape","of","required","integer","positive","ResultPage","stationId","useParams","useState","result","setResult","useEffect","isIgnored","a","fetch","mode","method","res","json","etaResultSchema","validate","validatedResult","window","location","reload","stationName","useMemo","station","routeData","find","nameEn","nameCh","platform_list","flatMap","platform_id","route_list","train_length","route_no","time_en","dest_en","StationListItem","space","button","routeList","StationListPage","Object","fromEntries","routeEnabledStatus","setRouteEnabledStatus","buttons","entries","sort","route1","route2","localeCompare","status","routeButton","routeButton__enabled","prevRouteStatus","otherStatuses","enabledRoutes","filter","stationItems","routes","some","includes","routeButtonList","routeButtonListRouteButton","actionButton","statuses","length","placeholder","App","mapView","setMapView","handleViewChange","app","element","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5f928799.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"ResultRow_row__2f4S9\",\"platformId\":\"ResultRow_platformId__HU7X0\",\"route\":\"ResultRow_route__LRm5F\",\"destination\":\"ResultRow_destination__3LOX7\",\"time\":\"ResultRow_time__1ilG1\"};","import React from \"react\";\n\nimport styles from \"./AttributionPage.module.scss\";\n\nfunction AttributionPage() {\n  return (\n    <div className={styles.page}>\n      <ul>\n        <li>The light rail data are from the HK government and DATA.GOV.HK. For details, please see <a href=\"https://data.gov.hk/en/terms-and-conditions\" target=\"_blank\" rel=\"noreferrer noopener\">DATA.GOV.HK</a>. We acknowledge the Government ownership of the intellectual property rights in the Data.</li>\n        <li>The geographical data are provided by Overpass API. Please see <a href=\"https://wiki.openstreetmap.org/wiki/Overpass_API\" target=\"_blank\" rel=\"noreferrer noopener\">Overpass API</a> for details.</li>\n        <li>We use third party libraries. For licenses, please see <a href=\"https://github.com/lightrailpassenger/lighter\" target=\"_blank\" rel=\"noreferrer noopener\">Lighter GitHub repository</a> for details.</li>\n      </ul>\n    </div>\n  );\n}\n\nexport default AttributionPage;\n","import React from \"react\";\n\nimport styles from \"./Header.module.scss\";\n\nfunction Header() {\n  return (\n    <div className={styles.header}>\n      <h1 className={styles.title}>Lighter</h1>\n      <h2 className={styles.description}>A lightweight light rail utility</h2>\n    </div>\n  );\n}\n\nexport default Header;\n","import React, {\n  useRef,\n  useLayoutEffect,\n} from \"react\";\nimport L, { Map as MapType } from \"leaflet\";\n\ninterface MapProps {\n  centerX: number;\n  centerY: number;\n  zoomLevel: number;\n  markers: Array<{\n    lat: number,\n    lon: number,\n    id: string,\n  }>;\n  onMarkerClick(id: string): void;\n  onViewChange(centerX: number, centerY: number, zoomLevel: number): void;\n}\n\nfunction Map(props: MapProps) {\n  const {\n    centerX,\n    centerY,\n    zoomLevel,\n    markers,\n    onViewChange,\n    onMarkerClick\n  } = props;\n  const mapRef = useRef<MapType | null>(null);\n  const ref = useRef<HTMLDivElement | null>(null);\n\n  useLayoutEffect(() => {\n    if (ref.current) {\n      mapRef.current = L.map(ref.current);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; <a href=\"https://openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n      })\n        .addTo(mapRef.current);\n      ref.current.style.width = '100%';\n      ref.current.style.height = '100%';\n    }\n  }, []);\n  useLayoutEffect(() => {\n    const handler = () => {\n      if (mapRef.current) {\n        const { lat, lng } = mapRef.current.getCenter();\n        const zoomLevel = mapRef.current.getZoom();\n        onViewChange(lat, lng, zoomLevel);\n      }\n    };\n    if (mapRef.current) {\n      mapRef.current.on('zoomend', handler);\n      mapRef.current.on('moveend', handler);\n    }\n    return () => {\n      if (mapRef.current) {\n        mapRef.current.off('zoomend', handler);\n        mapRef.current.off('moveend', handler);\n      }\n    };\n  }, [onViewChange]);\n  useLayoutEffect(() => {\n    if (mapRef.current) {\n      for (let marker of markers) {\n        const { id, lat, lon } = marker;\n        const markerElement = L.marker([lat, lon]);\n        markerElement.on('click', () => {\n          onMarkerClick(id);\n        });\n        markerElement.addTo(mapRef.current);\n      }\n    }\n  }, [markers, onMarkerClick]);\n  useLayoutEffect(() => {\n    if (mapRef.current) {\n      mapRef.current.setView([centerX, centerY], zoomLevel);\n    }\n  }, [centerX, centerY, zoomLevel]);\n\n  return (\n    <div ref={ref} />\n  );\n}\n\nexport default Map;\n","import React, { useCallback } from \"react\";\n\nimport { useNavigate } from \"react-router-dom\";\n\nimport Map from \"./Map\";\n\nimport styles from \"./MapPage.module.scss\";\n\ninterface MapPageProps {\n  centerX: number;\n  centerY: number;\n  zoomLevel: number;\n  markers: Array<{\n    id: string,\n    lat: number,\n    lon: number,\n  }>;\n  onViewChange(centerX: number, centerY: number, zoomLevel: number): void;\n}\n\nfunction MapPage(props: MapPageProps) {\n  const {\n    centerX,\n    centerY,\n    zoomLevel,\n    markers,\n    onViewChange\n  } = props;\n\n  const navigate = useNavigate();\n  const handleMarkerClick = useCallback((id: string) => {\n    navigate(`/result/${id}`);\n  }, [navigate]);\n\n  return (\n    <div className={styles.mapPage}>\n      <Map\n        centerX={centerX}\n        centerY={centerY}\n        zoomLevel={zoomLevel}\n        markers={markers}\n        onMarkerClick={handleMarkerClick}\n        onViewChange={onViewChange}\n      />\n    </div>\n  );\n}\n\nexport default MapPage;\n","import React, { useCallback } from \"react\";\n\nimport { useNavigate } from \"react-router-dom\";\n\nimport styles from \"./NavigationItem.module.scss\";\n\ninterface NavigationItemProps {\n  name: string;\n  path: string;\n}\n\nfunction NavigationItem(props: NavigationItemProps) {\n  const {\n    name,\n    path,\n  } = props;\n  const navigate = useNavigate();\n  const handleClick = useCallback((event) => {\n    event.preventDefault();\n    navigate(path);\n  }, [navigate, path]);\n\n  return (\n    <a className={styles.item} href={`/#${path}`} onClick={handleClick}>{name}</a>\n  );\n}\n\nexport default NavigationItem;\n","import React from \"react\";\n\nimport NavigationItem from \"./NavigationItem\";\n\nimport styles from \"./Navigation.module.scss\";\n\nfunction Navigation() {\n  return (\n    <div className={styles.navigation}>\n      <NavigationItem name=\"Map\" path=\"/\" />\n      <NavigationItem name=\"Station List\" path=\"/list\" />\n      <NavigationItem name=\"Attribution\" path=\"/attribution\" />\n    </div>\n  )\n}\n\nexport default Navigation;\n","import React from \"react\";\n\nimport styles from \"./ResultRow.module.scss\";\n\ninterface ResultRowProps {\n  platformId: string | number;\n  route: string;\n  destination: string;\n  trainLength: string | number;\n  time: string;\n}\n\nfunction ResultRow(props: ResultRowProps) {\n  const {\n    platformId,\n    route,\n    destination,\n    trainLength,\n    time,\n  } = props;\n\n  return (\n    <div className={styles.row}>\n      <span className={styles.platformId}>{platformId}</span>\n      <span className={styles.route}>{route}{\n        typeof trainLength === \"number\" ?\n          new Array(trainLength).fill(0).map(() => ('\\u{1f68b}')).join('') :\n          trainLength\n      }</span>\n      <span className={styles.destination}>{destination}</span>\n      <span className={styles.time}>{time}</span>\n    </div>\n  );\n}\n\nexport default ResultRow;\n","import * as yup from \"yup\";\n\ntype ETAResultType = {\n  \"platform_list\": Array<{\n    \"platform_id\": number;\n    \"route_list\": Array<{\n      \"train_length\": number,\n      \"route_no\": string,\n      \"time_en\": string,\n      \"dest_en\": string,\n    }>\n  }>;\n};\n\nconst schema = yup.object().shape({\n  \"platform_list\": yup.array().of(yup.object().shape({\n    \"platform_id\": yup.number().required(),\n    \"route_list\": yup.array().of(yup.object().shape({\n      \"train_length\": yup.number().integer().positive().required(),\n      \"route_no\": yup.string().required(),\n      \"time_en\": yup.string().required(),\n      \"dest_en\": yup.string().required(),\n    }).required()).required(),\n  }).required()).required(),\n}).required();\n\nexport type { ETAResultType };\nexport default schema;\n","import React, { useEffect, useMemo, useState } from \"react\";\n\nimport { useParams } from \"react-router-dom\";\n\nimport ResultRow from \"./ResultRow\";\n\nimport etaResultSchema, { ETAResultType } from \"./schemas/ETAResultSchema\";\n\nimport routeData from \"./route_data.json\";\n\nimport styles from \"./ResultPage.module.scss\";\n\nconst DATA_ENDPOINT = \"https://rt.data.gov.hk/v1/transport/mtr/lrt/getSchedule?station_id=\";\n\nfunction ResultPage() {\n  const { stationId } = useParams();\n\n  const [result, setResult] = useState<ETAResultType | undefined>();\n\n  useEffect(() => {\n    let isIgnored = false;\n    (async () => {\n      try {\n        const res = await fetch(`${DATA_ENDPOINT}${stationId}`, { mode: 'cors', method: 'GET' });\n        const result = await res.json();\n        const validatedResult = await etaResultSchema.validate(result);\n\n        if (!isIgnored) {\n          setResult(validatedResult);\n        }\n      } catch {\n        window.location.reload();\n      }\n    })();\n\n    return () => {\n      isIgnored = true;\n    };\n  }, [stationId]);\n\n  const stationName = useMemo(() => {\n    const station = routeData.find(({ id }) => (id === stationId));\n    return station ? `${station.nameEn} ${station.nameCh}` : '';\n  }, [stationId]);\n\n  return (\n    <div className={styles.page}>\n      <h3 className={styles.stationName}>{stationName}</h3>\n      <ResultRow\n        platformId=\"Platform\"\n        trainLength=\"\"\n        route=\"Route\"\n        time=\"Time of arrivals\"\n        destination=\"Destination\"\n      />\n      {\n      result &&\n      result.platform_list.flatMap(({ platform_id, route_list }) => {\n        return route_list.flatMap(({ train_length, route_no, time_en, dest_en }) => (\n          <ResultRow\n            key={`${platform_id}-${train_length}-${route_no}-${time_en}-${dest_en}`}\n            platformId={platform_id}\n            trainLength={train_length}\n            route={route_no}\n            time={time_en}\n            destination={dest_en}\n          />\n        ));\n      })\n    }</div>\n  );\n}\n\nexport default ResultPage;\n","import React, { useCallback } from \"react\";\n\nimport { useNavigate } from \"react-router-dom\";\n\nimport styles from \"./StationListItem.module.scss\";\n\ninterface StationListeItemProps {\n  id: string;\n  nameEn: string;\n  nameCh: string;\n}\n\nfunction StationListItem(props: StationListeItemProps) {\n  const { id, nameEn, nameCh } = props;\n  const navigate = useNavigate();\n  const handleClick = useCallback((event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    navigate(`/result/${id}`);\n  }, [navigate, id]);\n\n  return (\n    <div className={styles.row}>\n      <span className={styles.name}>{`${nameEn} ${nameCh}`}</span>\n      <span className={styles.space} />\n      <a className={styles.button} href={`/#/result/${id}`} onClick={handleClick}>Go</a>\n    </div>\n  );\n}\n\nexport default StationListItem;\n","import React, { useCallback, useState } from \"react\";\n\nimport StationListItem from \"./StationListItem\";\n\nimport routeData from \"./route_data.json\";\n\nimport styles from \"./StationListPage.module.scss\";\n\nconst routeList = [\"505\", \"507\", \"610\", \"614\", \"615\", \"614P\", \"615P\", \"705\", \"706\", \"751\", \"751P\", \"761P\"];\n\nfunction StationListPage() {\n  const [routeEnabledStatus, setRouteEnabledStatus] = useState(() => {\n    return Object.fromEntries(routeList.map((route) => ([route, true])));\n  });\n  const buttons = Object.entries(routeEnabledStatus)\n    .sort(([route1], [route2]) => (route1.localeCompare(route2)))\n    .map(([route, status]) => {\n      return (\n        <button\n          className={`${styles.routeButton}${status ? ` ${styles.routeButton__enabled}` : ''}`}\n          onClick={() => {\n            setRouteEnabledStatus(({\n              [route]: prevRouteStatus,\n              ...otherStatuses\n            }) => ({\n              [route]: !prevRouteStatus,\n              ...otherStatuses\n            }));\n          }}\n        >\n          {route}\n        </button>\n      );\n    });\n  const enabledRoutes = Object.entries(routeEnabledStatus)\n    .filter(([route, status]) => (status))\n    .map(([route]) => (route));\n  const stationItems = routeData\n    .filter(({ routes }) => (routes.some((route) => (enabledRoutes.includes(route)))))\n    .map(({\n      id,\n      nameEn,\n      nameCh,\n    }) => {\n      return (\n        <StationListItem key={nameEn} id={id} nameEn={nameEn} nameCh={nameCh} />\n      );\n    });\n  return (\n    <div className={styles.page}>\n      <div className={styles.routeButtonList}>\n        <div className={styles.routeButtonListRouteButton}>\n          {buttons}\n        </div>\n        <div className={styles.actionButton}>\n          <button\n            className={styles.routeButton}\n            onClick={useCallback(() => {\n              setRouteEnabledStatus((statuses) => (\n                Object.fromEntries(Object.entries(statuses).map(([route, status]) => ([route, false])))\n              ));\n            }, [])}\n          >\n            Clear\n          </button>\n        </div>\n      </div>\n      {stationItems.length ? stationItems : (\n        <div className={styles.placeholder}>\n          Choose a route\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default StationListPage;\n","import React, { useCallback, useState } from \"react\";\n\nimport { HashRouter, Routes, Route } from \"react-router-dom\";\n\nimport AttributionPage from \"./AttributionPage\";\nimport Header from \"./Header\";\nimport MapPage from \"./MapPage\";\nimport Navigation from \"./Navigation\";\nimport ResultPage from \"./ResultPage\";\nimport StationListPage from \"./StationListPage\";\n\nimport routeData from \"./route_data.json\";\n\nimport styles from \"./App.module.scss\";\n\nfunction App() {\n  const [mapView, setMapView] = useState<{\n    centerX: number,\n    centerY: number,\n    zoomLevel: number,\n  }>({\n    centerX: 22.42,\n    centerY: 114,\n    zoomLevel: 13,\n  });\n\n  const handleViewChange = useCallback((\n    centerX: number,\n    centerY: number,\n    zoomLevel: number\n  ) => {\n    setMapView({\n      centerX,\n      centerY,\n      zoomLevel,\n    });\n  }, []);\n\n  return (\n    <div className={styles.app}>\n      <HashRouter>\n        <Header />\n        <Navigation />\n        <Routes>\n          <Route path=\"/\" element={\n            <MapPage {...mapView} markers={routeData} onViewChange={handleViewChange} />\n          } />\n          <Route path=\"/list\" element={\n            <StationListPage />\n          } />\n          <Route path=\"/result/:stationId\" element={\n            <ResultPage />\n          } />\n          <Route path=\"/attribution\" element={\n            <AttributionPage />\n          } />\n        </Routes>\n      </HashRouter>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"StationListItem_row__IkSWH\",\"name\":\"StationListItem_name__BmMHv\",\"space\":\"StationListItem_space__1WC6A\",\"button\":\"StationListItem_button__V2kGs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__34Mnk\",\"title\":\"Header_title__R3bRx\",\"description\":\"Header_description__1RdZ8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"ResultPage_page__3ySjD\",\"stationName\":\"ResultPage_stationName__39vU4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"AttributionPage_page__1PVOg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mapPage\":\"MapPage_mapPage__1Lb_1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"NavigationItem_item__3kr6W\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navigation\":\"Navigation_navigation__1Kgbb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__2ziFi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"StationListPage_page__2VcSW\",\"routeButtonList\":\"StationListPage_routeButtonList__1hPdh\",\"routeButtonListRouteButton\":\"StationListPage_routeButtonListRouteButton__WzmCg\",\"placeholder\":\"StationListPage_placeholder__BLUvt\",\"actionButton\":\"StationListPage_actionButton__2WFCu\",\"routeButton\":\"StationListPage_routeButton__1IH7p\",\"routeButton__enabled\":\"StationListPage_routeButton__enabled__225u_\"};"],"sourceRoot":""}