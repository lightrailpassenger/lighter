(this.webpackJsonplighter=this.webpackJsonplighter||[]).push([[5],{182:function(t,e,n){t.exports={page:"ResultPage_page__3ySjD",stationName:"ResultPage_stationName__39vU4"}},188:function(t,e,n){"use strict";n.r(e);var a=n(75),r=n.n(a),i=n(77),o=n(4),s=n(0),c=n(1),u=n(14),l=n(78),d=n.n(l),m=n(2);var f=function(t){var e=t.platformId,n=t.route,a=t.destination,r=t.trainLength,i=t.time;return Object(m.jsxs)("div",{className:d.a.row,children:[Object(m.jsx)("span",{className:d.a.platformId,children:e}),Object(m.jsxs)("span",{className:d.a.route,children:[n,"number"===typeof r?new Array(r).fill(0).map((function(){return"\ud83d\ude8b"})).join(""):r]}),Object(m.jsx)("span",{className:d.a.destination,children:a}),Object(m.jsx)("span",{className:d.a.time,children:i})]})},p=n(185),_=p.c().shape({platform_list:p.a().of(p.c().shape({platform_id:p.b().required(),route_list:p.a().of(p.c().shape({train_length:p.b().integer().positive().required(),route_no:p.d().required(),time_en:p.d().required(),dest_en:p.d().required()}).required()).required()}).required()).required()}).required(),h=n(12),j=n(182),b=n.n(j);e.default=function(){var t=Object(c.g)().stationId,e=Object(s.useState)(),n=Object(o.a)(e,2),a=n[0],l=n[1];Object(s.useEffect)((function(){var e=!1;return Object(i.a)(r.a.mark((function n(){var a,i,o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("".concat("https://rt.data.gov.hk/v1/transport/mtr/lrt/getSchedule?station_id=").concat(t),{mode:"cors",method:"GET"});case 3:return a=n.sent,n.next=6,a.json();case 6:return i=n.sent,n.next=9,_.validate(i);case 9:o=n.sent,e||l(o),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),window.location.reload();case 16:case"end":return n.stop()}}),n,null,[[0,13]])})))(),function(){e=!0}}),[t]);var d=Object(s.useMemo)((function(){var e=h.find((function(e){return e.id===t}));return e?"".concat(e.nameEn," ").concat(e.nameCh):""}),[t]);return Object(m.jsxs)("div",{className:b.a.page,children:[Object(m.jsx)("h3",{className:b.a.stationName,children:d}),Object(m.jsx)(f,{platformId:"Platform",trainLength:"",route:"Route",time:"Time of arrivals",destination:"Destination"}),a?a.platform_list.flatMap((function(t){var e=t.platform_id;return t.route_list.flatMap((function(t){var n=t.train_length,a=t.route_no,r=t.time_en,i=t.dest_en;return Object(m.jsx)(f,{platformId:e,trainLength:n,route:a,time:r,destination:i},"".concat(e,"-").concat(n,"-").concat(a,"-").concat(r,"-").concat(i))}))})):Object(m.jsx)(u.a,{})]})}},78:function(t,e,n){t.exports={row:"ResultRow_row__2f4S9",platformId:"ResultRow_platformId__HU7X0",route:"ResultRow_route__LRm5F",destination:"ResultRow_destination__3LOX7",time:"ResultRow_time__1ilG1"}}}]);
//# sourceMappingURL=5.95f62f05.chunk.js.map